<!DOCTYPE html>
     <html lang="en">
     <head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <meta name="description" content="Create an ATS-friendly CV for your job search.">
       <meta name="robots" content="noindex">
       <title>Create CV - ePortfolio Generator</title>
       <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
       <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>
       <style>
         body { background-color: #f3f4f6; }
         .fade-in { animation: fadeIn 1s ease-in; }
         @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
         .preview-toggle { display: none; }
         @media (max-width: 640px) { .preview-toggle { display: block; } .preview-hidden { display: none; } }
       </style>
     </head>
     <body class="antialiased">
       <div id="root"></div>
       <script type="text/babel">
         const { useState, useEffect } = React;

         const CVForm = () => {
           const [formData, setFormData] = useState({
             name: '', contact: '', summary: '', skills: '', projects: ''
           });
           const [showPreview, setShowPreview] = useState(true);
           const [savedMessage, setSavedMessage] = useState('');

           useEffect(() => {
             // Load saved portfolio data or CV data
             const savedPortfolio = localStorage.getItem('portfolioForm');
             const savedCV = localStorage.getItem('cvForm');
             if (savedCV) {
               setFormData(JSON.parse(savedCV));
             } else if (savedPortfolio) {
               const portfolio = JSON.parse(savedPortfolio);
               setFormData({
                 name: portfolio.name || '',
                 contact: portfolio.email || '',
                 summary: portfolio.summary || '',
                 skills: portfolio.skills || '',
                 projects: portfolio.projects || ''
               });
             }
           }, []);

           const handleChange = (e) => {
             const { name, value } = e.target;
             setFormData(prev => {
               const newData = { ...prev, [name]: value };
               localStorage.setItem('cvForm', JSON.stringify(newData));
               setSavedMessage('Data saved locally!');
               setTimeout(() => setSavedMessage(''), 2000);
               return newData;
             });
           };

           const handleSubmit = (e) => {
             e.preventDefault();
             // Placeholder: Will POST to /api/generate?type=cv
             alert('CV form submitted! Backend integration pending.');
           };

           return (
             <div className="container mx-auto px-4 py-8 max-w-6xl fade-in">
               <a href="/index.html" className="text-blue-600 hover:underline mb-4 inline-block">Back to Home</a>
               <h1 className="text-3xl font-bold text-gray-800 mb-6">Create Your CV</h1>
               <div className="flex flex-col md:flex-row gap-8">
                 <form onSubmit={handleSubmit} className="md:w-1/2">
                   <div className="mb-4">
                     <label htmlFor="name" className="block text-gray-600 mb-2">Full Name *</label>
                     <input type="text" id="name" name="name" value={formData.name} onChange={handleChange}
                       className="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                       required aria-required="true" placeholder="John Doe" />
                   </div>
                   <div className="mb-4">
                     <label htmlFor="contact" className="block text-gray-600 mb-2">Contact Info *</label>
                     <input type="text" id="contact" name="contact" value={formData.contact} onChange={handleChange}
                       className="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                       required aria-required="true" placeholder="you@example.com | 123-456-7890" />
                   </div>
                   <div className="mb-4">
                     <label htmlFor="summary" className="block text-gray-600 mb-2">Summary</label>
                     <textarea id="summary" name="summary" value={formData.summary} onChange={handleChange}
                       className="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                       rows="4" placeholder="Brief professional summary" />
                   </div>
                   <div className="mb-4">
                     <label htmlFor="skills" className="block text-gray-600 mb-2">Skills (comma-separated)</label>
                     <input type="text" id="skills" name="skills" value={formData.skills} onChange={handleChange}
                       className="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="JavaScript, React, Python" />
                   </div>
                   <div className="mb-4">
                     <label htmlFor="projects" className="block text-gray-600 mb-2">Projects</label>
                     <textarea id="projects" name="projects" value={formData.projects} onChange={handleChange}
                       className="w-full border border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                       rows="4" placeholder="Describe your projects" />
                   </div>
                   <button type="submit" className="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
                     aria-label="Create CV">
                     Create CV
                   </button>
                   <button type="button" onClick={() => { localStorage.removeItem('cvForm'); setFormData({}); setSavedMessage('Form cleared!'); setTimeout(() => setSavedMessage(''), 2000); }}
                     className="ml-4 bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500"
                     aria-label="Clear form">
                     Clear Form
                   </button>
                   {savedMessage && <p className="text-green-600 mt-2">{savedMessage}</p>}
                 </form>
                 <div className={`md:w-1/2 ${showPreview ? '' : 'preview-hidden'}`}>
                   <button onClick={() => setShowPreview(!showPreview)} className="preview-toggle bg-blue-600 text-white px-4 py-2 rounded-lg mb-4 md:hidden">
                     {showPreview ? 'Hide Preview' : 'Show Preview'}
                   </button>
                   <div className="bg-white p-6 rounded-lg shadow-md font-sans text-sm">
                     <h2 className="text-lg font-bold mb-2">{formData.name || 'Your Name'}</h2>
                     <h3 className="font-bold mb-1">Contact</h3>
                     <p className="mb-4">{formData.contact || 'Contact Info'}</p>
                     <h3 className="font-bold mb-1">Summary</h3>
                     <p className="mb-4">{formData.summary || 'Your summary'}</p>
                     <h3 className="font-bold mb-1">Skills</h3>
                     <ul className="list-disc pl-6 mb-4">
                       {formData.skills ? formData.skills.split(',').map(skill => <li key={skill}>{skill.trim() || 'Skill'}</li>) : <li>No skills</li>}
                     </ul>
                     <h3 className="font-bold mb-1">Projects</h3>
                     <p>{formData.projects || 'Your projects'}</p>
                   </div>
                 </div>
               </div>
             </div>
           );
         };

         const root = ReactDOM.createRoot(document.getElementById('root'));
         root.render(<CVForm />);
       </script>
     </body>
     </html>
